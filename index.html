<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veux-tu √™tre ma Valentine ? / Sevgilim olur musun? üíñ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Georgia', 'Palatino', serif;
            background: linear-gradient(135deg, #ff6b9d 0%, #c44569 50%, #ff6b9d 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
        }
        .container {
            background: white;
            border-radius: 30px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            text-align: center;
            position: relative;
        }
        h1 { font-size: 2.2em; color: #d63384; margin-bottom: 20px; font-weight: 400; letter-spacing: 2px; }
        .quiz-section, .puzzle-section, .final-section, .success-section { display: none; }
        .active { display: block; }
        .question { margin: 20px 0; }
        .question h2 { font-size: 1.6em; color: #333; margin-bottom: 15px; font-weight: 300; }
        .bilingual-text { font-size: 0.85em; color: #666; font-style: italic; margin-top: 5px; }
        
        /* Style pour les images/GIFs */
        .gif-container { width: 100%; max-width: 300px; margin: 20px auto; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .gif-container img { width: 100%; height: auto; display: block; }

        button {
            font-family: 'Georgia', 'Palatino', serif;
            font-size: 1.2em;
            padding: 12px 30px;
            margin: 10px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        .btn-yes { background: linear-gradient(135deg, #d63384 0%, #e91e63 100%); color: white; }
        .btn-no { background: #e0e0e0; color: #666; position: absolute; z-index: 1000; }
        .button-container { position: relative; min-height: 100px; margin-top: 20px; }
        .success-message { font-size: 2.5em; color: #d63384; margin: 20px 0; animation: pulse 1s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        .heart { color: #d63384; display: inline-block; animation: heartbeat 1.5s infinite; }
        @keyframes heartbeat { 0%, 100%, 50% { transform: scale(1); } 25% { transform: scale(1.2); } }
        
        /* Puzzle Styles */
        .puzzle-container { width: 100%; max-width: 360px; margin: 20px auto; }
        .puzzle-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 3px; background: #d63384; padding: 3px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .puzzle-tile { aspect-ratio: 1; background-size: 300%; background-position: center; cursor: pointer; transition: all 0.3s ease; border-radius: 5px; position: relative; }
        .puzzle-tile:hover:not(.empty) { transform: scale(0.95); opacity: 0.8; }
        .puzzle-tile.empty { background: #f0f0f0; cursor: default; }
        .puzzle-moves { margin: 15px 0; font-size: 1.1em; color: #666; }
        .puzzle-complete { font-size: 1.3em; color: #d63384; font-weight: bold; margin: 15px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Pour ma Valentine üíï<br><span style="font-size: 0.6em; color: #c44569;">Sevgilime üíï</span></h1>
        
        <div class="quiz-section active" id="quiz">
            <div class="question" id="question1">
                <h2>Es-tu la plus g√©niale ?</h2>
                <p class="bilingual-text">En harika ki≈üi sen misin?</p>
                <div class="gif-container">
                    <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExOHpueGZ3bmZ3bmZ3bmZ3bmZ3bmZ3bmZ3bmZ3bmZ3bmZ3bmZ3JmVwPXYxX2ludGVybmFsX2dpZl9ieV9pZCZjdD1n/c76IJLufpNUMo/giphy.gif" alt="Cute scan">
                </div>
                <button class="btn-yes" onclick="nextQuestion(1)">Oui / Evet ‚ú®</button>
            </div>
            
            <div class="question" id="question2" style="display: none;">
                <h2>Qui te rend heureuse ?</h2>
                <p class="bilingual-text">Seni mutlu eden kim?</p>
                <div class="gif-container">
                    <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExOHpueGZ3bmZ3bmZ3bmZ3bmZ3bmZ3bmZ3bmZ3bmZ3bmZ3bmZ3JmVwPXYxX2ludGVybmFsX2dpZl9ieV9pZCZjdD1n/VduFnP7f81Iha/giphy.gif" alt="Happy couple">
                </div>
                <button class="btn-yes" onclick="nextQuestion(2)">Mon mari / Kocam üåü</button>
            </div>
        </div>

        <div class="puzzle-section" id="puzzleGame">
            <h2>R√©sous ce puzzle pour continuer !</h2>
            <p class="bilingual-text">Devam etmek i√ßin bulmacayƒ± √ß√∂z!</p>
            <div class="puzzle-container">
                <div class="puzzle-grid" id="puzzleGrid"></div>
            </div>
            <div class="puzzle-moves">Mouvements / Hamle: <span id="moveCount">0</span></div>
            <div class="puzzle-complete" id="puzzleComplete" style="display: none;">
                Bravo ! Tu as r√©solu le puzzle ! üéâ<br>
                <span class="bilingual-text">Tebrikler! Bulmacayƒ± √ß√∂zd√ºn!</span>
            </div>
            <button class="btn-yes" id="continueBtn" onclick="continueFromPuzzle()" style="display: none;">Continuer / Devam et üíï</button>
        </div>

        <div class="final-section" id="finalQuestion">
            <h2>Veux-tu √™tre ma Valentine ?</h2>
            <p class="bilingual-text">Sevgilim olur musun?</p>
            <div class="gif-container">
                <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExOHpueGZ3bmZ3bmZ3bmZ3bmZ3bmZ3bmZ3bmZ3bmZ3bmZ3bmZ3JmVwPXYxX2ludGVybmFsX2dpZl9ieV9pZCZjdD1n/26BRv0ThflsHCqf0k/giphy.gif" alt="Valentine">
            </div>
            <div class="button-container" id="buttonContainer">
                <button class="btn-yes" onclick="acceptValentine()">Oui / Evet ! üíñ</button>
                <button class="btn-no" id="noBtn" onmouseover="moveNoButton()">Non / Hayƒ±r</button>
            </div>
        </div>

        <div class="success-section" id="successMessage">
            <div class="success-message">Je t'aime ! <span class="heart">‚ù§Ô∏è</span></div>
            <p class="bilingual-text" style="font-size: 1.5em; margin: 10px 0;">Seni seviyorum!</p>
            <div class="gif-container">
                <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExOHpueGZ3bmZ3bmZ3bmZ3bmZ3bmZ3bmZ3bmZ3bmZ3bmZ3bmZ3JmVwPXYxX2ludGVybmFsX2dpZl9ieV9pZCZjdD1n/l0HlvU6gXnZHhbBv2/giphy.gif" alt="Party">
            </div>
            <p>Tu es ma Valentine pr√©f√©r√©e ! üíï</p>
            <p class="bilingual-text">Sonsuza dek en sevdiƒüim Sevgilimsin!</p>
        </div>
    </div>

    <script>
        // Puzzle Game Variables
        let tiles = [];
        let emptyIndex = 8;
        let moves = 0;
        const puzzleImage = 'https://picsum.photos/360/360?random=1'; // Replace this URL with your uploaded photo
        
        function initPuzzle() {
            const grid = document.getElementById('puzzleGrid');
            grid.innerHTML = '';
            tiles = [];
            moves = 0;
            document.getElementById('moveCount').textContent = moves;
            document.getElementById('puzzleComplete').style.display = 'none';
            document.getElementById('continueBtn').style.display = 'none';
            
            // Create tiles in order
            for (let i = 0; i < 9; i++) {
                const tile = document.createElement('div');
                tile.className = 'puzzle-tile';
                tile.dataset.index = i;
                
                if (i === 8) {
                    tile.classList.add('empty');
                } else {
                    const row = Math.floor(i / 3);
                    const col = i % 3;
                    tile.style.backgroundImage = `url(${puzzleImage})`;
                    tile.style.backgroundPosition = `${col * -100}% ${row * -100}%`;
                }
                
                tile.addEventListener('click', () => moveTile(i));
                grid.appendChild(tile);
                tiles.push(tile);
            }
            
            // Shuffle the puzzle
            shufflePuzzle();
        }
        
        function shufflePuzzle() {
            // Do 50 random valid moves to ensure solvable puzzle
            for (let i = 0; i < 50; i++) {
                const validMoves = getValidMoves();
                const randomMove = validMoves[Math.floor(Math.random() * validMoves.length)];
                swapTiles(emptyIndex, randomMove, false);
            }
            moves = 0;
            document.getElementById('moveCount').textContent = moves;
        }
        
        function getValidMoves() {
            const valid = [];
            const row = Math.floor(emptyIndex / 3);
            const col = emptyIndex % 3;
            
            if (row > 0) valid.push(emptyIndex - 3); // Up
            if (row < 2) valid.push(emptyIndex + 3); // Down
            if (col > 0) valid.push(emptyIndex - 1); // Left
            if (col < 2) valid.push(emptyIndex + 1); // Right
            
            return valid;
        }
        
        function moveTile(index) {
            if (document.getElementById('puzzleComplete').style.display !== 'none') return;
            
            const validMoves = getValidMoves();
            if (validMoves.includes(index)) {
                swapTiles(emptyIndex, index, true);
                checkWin();
            }
        }
        
        function swapTiles(index1, index2, countMove) {
            const temp = tiles[index1].className;
            const tempBg = tiles[index1].style.backgroundImage;
            const tempBgPos = tiles[index1].style.backgroundPosition;
            
            tiles[index1].className = tiles[index2].className;
            tiles[index1].style.backgroundImage = tiles[index2].style.backgroundImage;
            tiles[index1].style.backgroundPosition = tiles[index2].style.backgroundPosition;
            
            tiles[index2].className = temp;
            tiles[index2].style.backgroundImage = tempBg;
            tiles[index2].style.backgroundPosition = tempBgPos;
            
            emptyIndex = index2;
            
            if (countMove) {
                moves++;
                document.getElementById('moveCount').textContent = moves;
            }
        }
        
        function checkWin() {
            for (let i = 0; i < 8; i++) {
                const row = Math.floor(i / 3);
                const col = i % 3;
                const expectedPos = `${col * -100}% ${row * -100}%`;
                
                if (tiles[i].classList.contains('empty') || 
                    tiles[i].style.backgroundPosition !== expectedPos) {
                    return;
                }
            }
            
            // Puzzle is complete!
            document.getElementById('puzzleComplete').style.display = 'block';
            document.getElementById('continueBtn').style.display = 'inline-block';
        }
        
        function continueFromPuzzle() {
            document.getElementById('puzzleGame').classList.remove('active');
            document.getElementById('finalQuestion').classList.add('active');
        }
        
        function nextQuestion(num) {
            if (num === 1) {
                document.getElementById('question1').style.display = 'none';
                document.getElementById('question2').style.display = 'block';
            } else {
                document.getElementById('quiz').classList.remove('active');
                document.getElementById('puzzleGame').classList.add('active');
                initPuzzle();
            }
        }

        function moveNoButton() {
            const noBtn = document.getElementById('noBtn');
            // On utilise window pour s'assurer que le bouton ne sorte pas de l'√©cran visible
            const x = Math.random() * (window.innerWidth - noBtn.offsetWidth);
            const y = Math.random() * (window.innerHeight - noBtn.offsetHeight);
            noBtn.style.position = 'fixed';
            noBtn.style.left = x + 'px';
            noBtn.style.top = y + 'px';
        }

        function acceptValentine() {
            document.getElementById('finalQuestion').classList.remove('active');
            document.getElementById('successMessage').classList.add('active');
            createConfetti();
        }

        function createConfetti() {
            const canvas = document.createElement('canvas');
            Object.assign(canvas.style, { position: 'fixed', top: '0', left: '0', width: '100%', height: '100%', pointerEvents: 'none', zIndex: '9999' });
            document.body.appendChild(canvas);
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            const colors = ['#ff69b4', '#ff1493', '#d63384'];
            const pieces = Array.from({ length: 150 }, () => ({
                x: Math.random() * canvas.width, y: -20,
                w: Math.random() * 10 + 5, h: Math.random() * 5 + 5,
                color: colors[Math.floor(Math.random() * colors.length)],
                rot: Math.random() * 360, rSpd: Math.random() * 10 - 5,
                sY: Math.random() * 3 + 2, sX: Math.random() * 2 - 1, op: 1
            }));
            function anim() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                pieces.forEach((p, i) => {
                    p.y += p.sY; p.x += p.sX; p.rot += p.rSpd;
                    if (p.y > canvas.height - 100) p.op -= 0.02;
                    ctx.save(); ctx.globalAlpha = p.op; ctx.translate(p.x, p.y);
                    ctx.rotate(p.rot * Math.PI / 180); ctx.fillStyle = p.color;
                    ctx.fillRect(-p.w / 2, -p.h / 2, p.w, p.h); ctx.restore();
                    if (p.op <= 0) pieces.splice(i, 1);
                });
                if (pieces.length > 0) requestAnimationFrame(anim);
                else canvas.remove();
            }
            anim();
        }
    </script>
</body>
</html>
